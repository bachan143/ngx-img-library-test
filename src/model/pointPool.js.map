{"version":3,"sources":["../../../src/model/pointPool.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAEhC;IAME,mBAAY,WAAmB;QAC7B,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC;QAC3B,IAAI,IAAI,GAAU,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,KAAK,EAAE,CAAC,CAAC;QAEtD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC;YACrC,IAAI,CAAC,GAAG,IAAI,KAAK,EAAE,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YACd,IAAI,GAAG,CAAC,CAAC;QACX,CAAC;IACH,CAAC;IAED,sBAAW,qBAAQ;aAAnB;YACE,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;QAC7B,CAAC;;;OAAA;IAEM,0BAAM,GAAb,UAAc,CAAS,EAAE,CAAS;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC;YAChC,MAAM,gBAAgB,CAAC;QACzB,CAAC;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,GAAU,IAAI,CAAC,cAAc,CAAC;QACnC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,IAAI,CAAC;QAC7B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAEM,+BAAW,GAAlB,UAAmB,CAAQ;QACzB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;IAC1B,CAAC;IACH,gBAAC;AAAD,CAxCA,AAwCC,IAAA","file":"pointPool.js","sourceRoot":"","sourcesContent":["import { Point } from \"./point\";\n\nexport class PointPool {\n  private static _instance: PointPool;\n\n  private borrowed: number;\n  private firstAvailable: Point;\n\n  constructor(initialSize: number) {\n    PointPool._instance = this;\n    let prev: Point = (this.firstAvailable = new Point());\n\n    for (let i = 1; i < initialSize; i++) {\n      let p = new Point();\n      prev.next = p;\n      prev = p;\n    }\n  }\n\n  static get instance(): PointPool {\n    return PointPool._instance;\n  }\n\n  public borrow(x: number, y: number): Point {\n    if (this.firstAvailable == null) {\n      throw \"Pool exhausted\";\n    }\n    this.borrowed++;\n    let p: Point = this.firstAvailable;\n    this.firstAvailable = p.next;\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n\n  public returnPoint(p: Point) {\n    this.borrowed--;\n    p.x = 0;\n    p.y = 0;\n    p.next = this.firstAvailable;\n    this.firstAvailable = p;\n  }\n}\n"]}